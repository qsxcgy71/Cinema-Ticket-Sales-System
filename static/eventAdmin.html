<!doctype html>
<html>
<head>
  <!-- 引入 Bootstrap 和其他必要的库 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
  <link rel="stylesheet" href="css/event.css">
  <script src="js/eventAdmin.js" defer></script>
  <!--<script src="js/admintest.js" defer></script>-->
  <title>eventAdmin</title>
</head>
<body>
  <header class="p-3" style="background-color: lightblue; color: #333333; text-align: center;">
    <h1>Cinema Ticket Sales System</h1>
  </header>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
  </nav>
  <main>
    <div class="container text-center">
      <!-- 搜索功能 -->
      <div class="container my-4">
        <form id="search-form" class="mb-4">
          <div class="row g-3 align-items-center">
            <!-- 实时推荐输入框 -->
            <div class="col-md-2 position-relative">
              <input type="text" id="search-bar" class="form-control" placeholder="Search by title or keyword...">
              <div id="autocomplete-suggestions" class="list-group position-absolute w-100" style="z-index: 1000; display: none;"></div>
            </div>
            <!-- 日期范围 -->
            <div class="col-md-2">
              <input type="date" id="search-date-start" class="form-control" placeholder="Start date">
            </div>
            <!-- 场地过滤 -->
            <div class="col-md-2">
              <input type="text" id="search-venue" class="form-control" placeholder="Search by venue">
            </div>
            <!-- 标签过滤 -->
            <div class="col-md-2">
              <input type="text" id="search-tag" class="form-control" placeholder="Search by tags">
            </div>
            <!-- 提交按钮 -->
            <div class="col-md-2">
              <button type="button" class="btn btn-primary" id="filter-button">Filter</button>
            </div>
          </div>
        </form>
      </div>

      <!-- 添加新电影按钮 -->
      <div class="mb-4">
        <button class="btn btn-success" id="add-movie-btn">add new</button>
      </div>

      <!-- 显示电影的卡片 -->
      <div class="row row-cols-1 row-cols-sm-2 row-cols-md-4 text-center card-deck d-flex" id="movie-list">
        <!-- 电影卡片将通过前端脚本动态生成 -->
      </div>
    </div>
  </main>

  <!-- 添加/编辑电影的模态框 -->
  <div class="modal fade" id="movieModal" tabindex="-1" aria-labelledby="movieModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">

          <!--
        <form id="movie-form" enctype="multipart/form-data">
          <div class="modal-header">
            <h5 class="modal-title" id="movieModalLabel">New</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="关闭"></button>
          </div>
          <div class="modal-body">
            
            <div class="mb-3">
              <label for="movie-title" class="form-label">title</label>
              <input type="text" class="form-control" id="movie-title" name="name" required>
            </div>
            <div class="mb-3">
              <label for="movie-date" class="form-label">date</label>
              <input type="date" class="form-control" id="movie-date" name="date" required>
            </div>
            <div class="mb-3">
              <label for="movie-time" class="form-label">time</label>
              <input type="text" class="form-control" id="movie-time" name="time" placeholder="e.g.,  18:30-20:30" required>
            </div>
            <div class="mb-3">
              <label for="movie-location" class="form-label">location</label>
              <input type="text" class="form-control" id="movie-location" name="location" required>
            </div>
            <div class="mb-3">
              <label for="movie-normal-price" class="form-label">normal price</label>
              <input type="number" class="form-control" id="movie-normal-price" name="normal" required>
            </div>
            <div class="mb-3">
              <label for="movie-premium-price" class="form-label">premiumPrice</label>
              <input type="number" class="form-control" id="movie-premium-price" name="premium" required>
            </div>
            <div class="mb-3">
              <label for="movie-poster" class="form-label">poster(same name as movie, replace ' ' with _ in name)</label>
              <input type="file" class="form-control" id="movie-poster" name="movie-poster" accept="image/*">
            </div>
            <div class="mb-3">
              <label for="movie-tags" class="form-label">tags</label>
              <input type="text" class="form-control" id="movie-tags" name="tags">
            </div>
          </div>
          <div class="modal-footer">
            <button type="submit" class="btn btn-primary">save</button>
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          </div>
        </form>-->
        <form id="movie-form" enctype="multipart/form-data">
          <div class="modal-header">
            <h5 class="modal-title" id="movieModalLabel">New</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="关闭"></button>
          </div>
          <div class="modal-body">
            <!-- 电影名称 -->
            <div class="mb-3">
              <label for="movie-title" class="form-label">Title</label>
              <input type="text" class="form-control" id="movie-title" name="name" required>
            </div>
            <!-- 日期 -->
            <div class="mb-3">
              <label for="movie-date" class="form-label">Date</label>
              <input type="date" class="form-control" id="movie-date" name="date" required>
            </div>
            <!-- 时间 -->
            <div class="mb-3">
              <label for="movie-time" class="form-label">Time</label>
              <input type="text" class="form-control" id="movie-time" name="time" placeholder="e.g., 18:30-20:30" required>
            </div>
            <!-- 地点 -->
            <div class="mb-3">
              <label for="movie-location" class="form-label">Location</label>
              <input type="text" class="form-control" id="movie-location" name="location" required>
            </div>
            <!-- 普通票价 -->
            <div class="mb-3">
              <label for="movie-normal-price" class="form-label">Normal Price</label>
              <input type="number" class="form-control" id="movie-normal-price" name="normal" required>
              <!--<input type="number" class="form-control" id="movie-normal-price" name="normalPrice" required>-->
            </div>
            <!-- 高级票价 -->
            <div class="mb-3">
              <label for="movie-premium-price" class="form-label">Premium Price</label>
              <input type="number" class="form-control" id="movie-premium-price" name="premium" required>
              <!--<input type="number" class="form-control" id="movie-premium-price" name="premiumPrice" required>-->
            </div>
            <!-- 标签 -->
            <div class="mb-3">
              <label for="movie-tags" class="form-label">Tags</label>
              <input type="text" class="form-control" id="movie-tags" name="tags">
            </div>
            <!-- 海报文件 -->
            <div class="mb-3">
              <label for="movie-poster" class="form-label">Poster (Image File)</label>
              <input type="file" class="form-control" id="movie-poster" name="movie-poster" accept="image/*">
            </div>
            <!-- 可选：预览海报 -->
            <div class="mb-3">
              <img id="poster-preview" src="" alt="Poster Preview" style="max-width: 100%; display: none;">
            </div>
          </div>
          <div class="modal-footer">
            <button type="submit" class="btn btn-primary">Save</button>
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          </div>
        </form>
        
      </div>
    </div>
  </div>

  <br><br><br>
  <footer class="p-3" style="background-color: lightblue; color: #333333; text-align: center;">
    <div>Enjoy Managing Movies!</div>
    <div id="datetime"></div>
  </footer>
  <script>
    function updateDateTime() {
      const now = new Date();
      const date = now.toLocaleDateString('en-US');
      const time = now.toLocaleTimeString('en-US', {
        hour: 'numeric',
        minute: 'numeric',
        second: 'numeric',
        hour12: true,
      });
      document.getElementById('datetime').textContent = `${date}, ${time}`;
    }
    updateDateTime();
    setInterval(updateDateTime, 1000);
  </script>
</body>
</html>
